{"version":3,"file":"interactive-bar.js","sources":["components/interactive-bar/interactive-bar.vue","../前端资料/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvREVMTC9EZXNrdG9wL2NoaWNrZW5zb3VwL2NvbXBvbmVudHMvaW50ZXJhY3RpdmUtYmFyL2ludGVyYWN0aXZlLWJhci52dWU"],"sourcesContent":["<template>\n\t<view class=\"interactiveBar\">\n\t\t<view class=\"info\">\n\t\t\t<view class=\"left\">\n\t\t\t\t<view class=\"item\" v-if=\"type==0\" @click=\"clickShare\">\n\t\t\t\t\t<uni-icons type=\"redo\" size=\"28\" color=\"#999\"></uni-icons>\n\t\t\t\t\t<text></text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"item\" v-if=\"type==1\" @click=\"clickCommentBtn\">\n\t\t\t\t\t<view class=\"input\">评价一下...</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"right\">\n\t\t\t\t<view class=\"item\" @click=\"clickLike\">\n\t\t\t\t\t<uni-icons v-if=\"!newItem.isLike\" type=\"heart\" size=\"28\" color=\"#999\"></uni-icons>\n\t\t\t\t\t<uni-icons v-else type=\"heart-filled\" size=\"28\" color=\"#dd524d\"></uni-icons>\n\t\t\t\t\t<text v-if=\"newItem.like_count>0\" :style=\"{color:newItem.isLike?'#dd524d':'#999'}\">{{newItem.like_count}}</text>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"item\" @click=\"clickCollect\" v-if=\"false\">\n\t\t\t\t\t<uni-icons v-if=\"true\" type=\"star\" size=\"28\" color=\"#999\"></uni-icons>\n\t\t\t\t\t<uni-icons v-else type=\"star-filled\" size=\"28\" color=\"#f0ad4e\"></uni-icons>\n\t\t\t\t\t<text v-if=\"newItem.collect_count\">{{newItem.collect_count}}</text>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"item\" v-if=\"false\">\n\t\t\t\t\t<uni-icons type=\"chatbubble\" size=\"28\" color=\"#999\"></uni-icons>\n\t\t\t\t\t<text v-if=\"newItem.comment_count\">{{newItem.comment_count}}</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"item\" v-if=\"type==1\"  @click=\"clickShare\">\n\t\t\t\t\t<uni-icons type=\"redo\" size=\"28\" color=\"#999\"></uni-icons>\n\t\t\t\t\t<text></text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { onMounted, ref, watch } from 'vue';\nimport debounce from \"lodash.debounce\"\nconst db = uniCloud.database();\nconst props = defineProps({\n\ttype:{\n\t\ttype:Number,\n\t\tdefault:0\n\t},\n\titem:{\n\t\ttype:Object,\n\t\tdefault(){\n\t\t\treturn {}\n\t\t}\n\t}\n})\n\nconst newItem = ref(props.item);\n\nwatch(()=>props.item,(nv)=>{\n\tnewItem.value = nv;\n})\n\n\nconst current_id = uniCloud.getCurrentUserInfo().uid;\n\n\nconst emit = defineEmits(['comment','share']) \n\n\n\n//触发点击分享\nconst clickShare = ()=>{\n\temit('share')\n}\n\n\n//点赞\nconst clickLike = debounce(handleLike,1000,{'leading': true,'trailing': false})\n\nasync function handleLike(){\n\tif(newItem.value.isLike){\n\t\tnewItem.value.like_count--\n\t\tdb.collection(\"soup-like\").where({\n\t\t\tsoup_id:newItem.value._id,\n\t\t\tuser_id:current_id,\n\t\t\tlike_type:0\n\t\t}).remove();\n\t}else{\n\t\tnewItem.value.like_count++\n\t\tdb.collection(\"soup-like\").add({\n\t\t\tsoup_id:newItem.value._id,\n\t\t\tlike_type:0\n\t\t})\n\t}\n\tnewItem.value.isLike = !newItem.value.isLike\n\tuni.$emit('like',{_id:newItem.value._id,isLike:newItem.value.isLike,like_count:newItem.value.like_count})\n}\n\n\n\n\n//收藏\nconst clickCollect = ()=>{\n\tconsole.log(\"收藏\");\n}\n\n//点击评论框按钮\nconst clickCommentBtn = ()=>{\n\tconsole.log(\"交互子组件\");\n\temit(\"comment\")\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.interactiveBar {\t\t\n\t\t.info {\n\t\t\theight: 130rpx;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 30rpx;\n\n\t\t\t.item {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 10rpx 15rpx;\n\t\t\t\tcolor: #999;\n\t\t\t}\n\n\t\t\t.left {\t\t\t\t\n\t\t\t\tflex:1;\n\t\t\t\tmargin-right: 15rpx;\n\t\t\t\t.item {\n\t\t\t\t\tpadding-left: 0;\n\t\t\t\t}\n\t\t\t\t.input{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 70rpx;\n\t\t\t\t\tbackground: #f7f7f7;\n\t\t\t\t\tborder-radius: 70rpx;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tpadding:0 30rpx;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.right {\n\t\t\t\tdisplay: flex;\n\n\t\t\t\t.item:last-child {\n\t\t\t\t\tpadding-right: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n</style>","import Component from 'C:/Users/DELL/Desktop/chickensoup/components/interactive-bar/interactive-bar.vue'\nwx.createComponent(Component)"],"names":["uniCloud","ref","watch","debounce","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,UAAM,KAAKA,cAAAA,GAAS;AACpB,UAAM,QAAQ;AAad,UAAM,UAAUC,cAAG,IAAC,MAAM,IAAI;AAE9BC,kBAAK,MAAC,MAAI,MAAM,MAAK,CAAC,OAAK;AAC1B,cAAQ,QAAQ;AAAA,IACjB,CAAC;AAGD,UAAM,aAAaF,cAAQ,GAAC,mBAAoB,EAAC;AAGjD,UAAM,OAAO;AAKb,UAAM,aAAa,MAAI;AACtB,WAAK,OAAO;AAAA,IACb;AAIA,UAAM,YAAYG,cAAAA,SAAS,YAAW,KAAK,EAAC,WAAW,MAAK,YAAY,MAAK,CAAC;AAE9E,mBAAe,aAAY;AAC1B,UAAG,QAAQ,MAAM,QAAO;AACvB,gBAAQ,MAAM;AACd,WAAG,WAAW,WAAW,EAAE,MAAM;AAAA,UAChC,SAAQ,QAAQ,MAAM;AAAA,UACtB,SAAQ;AAAA,UACR,WAAU;AAAA,QACb,CAAG,EAAE,OAAM;AAAA,MACX,OAAM;AACJ,gBAAQ,MAAM;AACd,WAAG,WAAW,WAAW,EAAE,IAAI;AAAA,UAC9B,SAAQ,QAAQ,MAAM;AAAA,UACtB,WAAU;AAAA,QACb,CAAG;AAAA,MACD;AACD,cAAQ,MAAM,SAAS,CAAC,QAAQ,MAAM;AACtCC,oBAAG,MAAC,MAAM,QAAO,EAAC,KAAI,QAAQ,MAAM,KAAI,QAAO,QAAQ,MAAM,QAAO,YAAW,QAAQ,MAAM,WAAU,CAAC;AAAA,IACzG;AAWA,UAAM,kBAAkB,MAAI;AAC3BA,oBAAAA,MAAA,MAAA,OAAA,yDAAY,OAAO;AACnB,WAAK,SAAS;AAAA,IACf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7GA,GAAG,gBAAgB,SAAS;"}