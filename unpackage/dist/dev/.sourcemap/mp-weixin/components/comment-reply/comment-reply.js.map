{"version":3,"file":"comment-reply.js","sources":["components/comment-reply/comment-reply.vue","../前端资料/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvREVMTC9EZXNrdG9wL2NoaWNrZW5zb3VwL2NvbXBvbmVudHMvY29tbWVudC1yZXBseS9jb21tZW50LXJlcGx5LnZ1ZQ"],"sourcesContent":["<template>\n\t<view>\n\t\t<view class=\"commentPopup\">\n\t\t\t<input @confirm=\"onSubmit\" :focus=\"commentFocus\" v-model=\"commentData.comment_content\" type=\"text\" class=\"ipt\" \n\t\t\t:placeholder=\"commentData.reply_user_name?'回复：'+commentData.reply_user_name:'请输入评论内容'\" \n\t\t\tmaxlength=\"50\">\n\t\t\t<view class=\"button\" @click=\"onSubmit\">\n\t\t\t\t<uni-icons type=\"paperplane\" size=\"26\" color=\"#333\"></uni-icons>\n\t\t\t</view>\t\t\t\n\t\t</view>\n\t\t<view class=\"safe-area-bottom\" :style=\"{background:'#fff'}\"></view>\n\t</view>\n</template>\n\n<script setup>\nimport {nextTick, ref} from \"vue\";\nimport {useUserStore} from \"@/stores/user.js\"\nconst userStore = useUserStore();\nconst secCheckObj = uniCloud.importObject(\"secCheckContent\",{customUI:true})\nconst db = uniCloud.database();\nconst commentData = ref({\n\tcomment_content:\"\"\n})\nconst commentFocus = ref(false);\nconst props = defineProps({\n\tsource:{\n\t\ttype:Object,\n\t\tdefault(){\n\t\t\treturn {}\n\t\t}\n\t}\n})\nconst emits = defineEmits([\"success\"]);\n\nconst focusFn = ()=>{\n\tcommentFocus.value = false;\n\tnextTick(()=>{\n\t\tcommentFocus.value = true;\n\t\tcommentData.value = {\n\t\t\t...commentData.value,\n\t\t\t...props.source\n\t\t}\n\t})\t\n}\n\n\nconst onSubmit = async ()=>{\n\tuni.showLoading()\n\tlet {reply_user_name,..._commentData} = commentData.value;\t\t\n\tlet secRes = await secCheckObj.textSecCheck(commentData.value.comment_content,userStore.userInfo.openid);\n\tif(secRes.code){\n\t\tuni.hideLoading()\n\t\tuni.showModal({\n\t\t\ttitle:secRes.errMsg,\n\t\t\tcontent:`发布内容存在\"${secRes.result.label}\"问题,请重新编辑后发布!`,\n\t\t\tshowCancel:false\n\t\t})\n\t\treturn;\n\t}\n\t\n\tlet res = await db.collection(\"soup-comments\").add(_commentData);\n\tcommentData.value.comment_content = \"\"\n\tuni.hideLoading()\n\temits(\"success\")\n\tconsole.log(res);\n}\n\n\ndefineExpose({\n\tfocusFn\n})\n</script>\n\n<style lang=\"scss\" scoped>\n\n.commentPopup{\n\tbackground: #fff;\n\tpadding:30rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\t.ipt{\n\t\tbackground: #f7f7f7;\n\t\theight:70rpx;\n\t\tflex:1;\n\t\tpadding:0 20rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor:#333;\n\t}\n\t.button{\n\t\twidth: 70rpx;\n\t\theight: 70rpx;\n\t\tmargin-left:10rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\t\t\n\t}\n}\n</style>","import Component from 'C:/Users/DELL/Desktop/chickensoup/components/comment-reply/comment-reply.vue'\nwx.createComponent(Component)"],"names":["useUserStore","uniCloud","ref","nextTick","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAiBA,UAAM,YAAYA,YAAY,aAAA;AAC9B,UAAM,cAAcC,cAAQ,GAAC,aAAa,mBAAkB,EAAC,UAAS,KAAI,CAAC;AAC3E,UAAM,KAAKA,cAAAA,GAAS;AACpB,UAAM,cAAcC,cAAAA,IAAI;AAAA,MACvB,iBAAgB;AAAA,IACjB,CAAC;AACD,UAAM,eAAeA,cAAAA,IAAI,KAAK;AAC9B,UAAM,QAAQ;AAQd,UAAM,QAAQ;AAEd,UAAM,UAAU,MAAI;AACnB,mBAAa,QAAQ;AACrBC,oBAAAA,WAAS,MAAI;AACZ,qBAAa,QAAQ;AACrB,oBAAY,QAAQ;AAAA,UACnB,GAAG,YAAY;AAAA,UACf,GAAG,MAAM;AAAA,QACT;AAAA,MACH,CAAE;AAAA,IACF;AAGA,UAAM,WAAW,YAAU;AAC1BC,oBAAAA,MAAI,YAAa;AACjB,UAAI,EAAC,iBAAgB,GAAG,aAAY,IAAI,YAAY;AACpD,UAAI,SAAS,MAAM,YAAY,aAAa,YAAY,MAAM,iBAAgB,UAAU,SAAS,MAAM;AACvG,UAAG,OAAO,MAAK;AACdA,sBAAAA,MAAI,YAAa;AACjBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAM,OAAO;AAAA,UACb,SAAQ,UAAU,OAAO,OAAO,KAAK;AAAA,UACrC,YAAW;AAAA,QACd,CAAG;AACD;AAAA,MACA;AAED,UAAI,MAAM,MAAM,GAAG,WAAW,eAAe,EAAE,IAAI,YAAY;AAC/D,kBAAY,MAAM,kBAAkB;AACpCA,oBAAAA,MAAI,YAAa;AACjB,YAAM,SAAS;AACfA,oBAAAA,MAAY,MAAA,OAAA,oDAAA,GAAG;AAAA,IAChB;AAGA,aAAa;AAAA,MACZ;AAAA,IACD,CAAC;;;;;;;;;;;;;;;;;;;ACrED,GAAG,gBAAgB,SAAS;"}