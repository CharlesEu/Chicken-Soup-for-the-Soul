{"version":3,"file":"soup-list.js","sources":["components/soup-list/soup-list.vue","../前端资料/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvREVMTC9EZXNrdG9wL2NoaWNrZW5zb3VwL2NvbXBvbmVudHMvc291cC1saXN0L3NvdXAtbGlzdC52dWU"],"sourcesContent":["<!-- 审核鸡汤页面  review-list的子组件-->\r\n<template>\n\t<view class=\"content\">\n\t\t<z-paging ref=\"paging\" v-model=\"dataList\" @query=\"queryList\" :auto=\"false\" \n\t\t:fixed=\"false\">\n\t\t\t<template #loading>\n\t\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\n\t\t\t</template>\n\t\t\t<view class=\"list\">\n\t\t\t\t<view class=\"item\" v-for=\"item in dataList\" :key=\"item._id\">\r\n\t\t\t\t\t<!-- 子组件 -->\n\t\t\t\t\t<soup-item :item=\"item\" @remove=\"onRemove\"></soup-item>\n\t\t\t\t</view>\n\t\t\t </view>\t\n\t\t</z-paging>\n\t</view>\n</template>\n\n<script setup>\nimport {nextTick, ref, watch} from \"vue\";\nimport {stateLists} from \"@/utils/common.js\"\n\nconst dataList = ref([]);\nconst paging =ref(null)\nconst db = uniCloud.database();\nconst firstLoaded = ref(false);\n\nconst props = defineProps({\n\t//每一个索引\n\ttabIndex: {\n\t\ttype: Number,\n\t\tdefault: function(){\n\t\t\treturn 0\n\t\t}\n\t},\n\t//当前swiper切换到第几个index\n\tcurrentIndex: {\n\t\ttype: Number,\n\t\tdefault: function(){\n\t\t\treturn 0\n\t\t}\n\t}\n})\n\nwatch(()=>props.currentIndex,(nv,ov)=>{\n\tif(nv == props.tabIndex){\n\t\tif(!firstLoaded.value){\n\t\t\tnextTick(()=>{\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tpaging.value.reload();\n\t\t\t\t},100)\n\t\t\t})\n\t\t}\n\t}\n},{\n\timmediate: true\n})\n\n\n\nfunction queryList(pageNo, pageSize){\n\tgetSoupList(pageNo, pageSize)\n}\n\n\nasync function getSoupList(pageNo, pageSize){\n\tlet skip = (pageNo - 1)*pageSize\n\tlet {result:{data,errCode}} = await db.collection(\"soup-chicken\")\n\t.where(`status == ${stateLists[props.tabIndex].value} && is_delete != true`)\n\t.field(\"publish_date,last_modify_date,content,soup_type,like_count,collect_count,comment_count,status\")\n\t.orderBy(\"last_modify_date\",\"desc\").skip(skip).limit(pageSize).get();\n\tif(errCode!=0) return;\n\tpaging.value.complete(data);\n\tfirstLoaded.value = true;\n\tconsole.log(data);\t\n}\n\n\nfunction onRemove(){\t\n\tpaging.value.refresh();\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n.content {\n\theight: 100%;\n\t.list{\n\t\tpadding:30rpx 30rpx 0;\t\t\n\t}\n}\t\n</style>","import Component from 'C:/Users/DELL/Desktop/chickensoup/components/soup-list/soup-list.vue'\nwx.createComponent(Component)"],"names":["ref","uniCloud","watch","nextTick","stateLists","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsBA,UAAM,WAAWA,cAAAA,IAAI,CAAA,CAAE;AACvB,UAAM,SAAQA,cAAG,IAAC,IAAI;AACtB,UAAM,KAAKC,cAAAA,GAAS;AACpB,UAAM,cAAcD,cAAAA,IAAI,KAAK;AAE7B,UAAM,QAAQ;AAiBdE,kBAAK,MAAC,MAAI,MAAM,cAAa,CAAC,IAAG,OAAK;AACrC,UAAG,MAAM,MAAM,UAAS;AACvB,YAAG,CAAC,YAAY,OAAM;AACrBC,wBAAAA,WAAS,MAAI;AACZ,uBAAW,MAAI;AACd,qBAAO,MAAM;YACb,GAAC,GAAG;AAAA,UACT,CAAI;AAAA,QACD;AAAA,MACD;AAAA,IACF,GAAE;AAAA,MACD,WAAW;AAAA,IACZ,CAAC;AAID,aAAS,UAAU,QAAQ,UAAS;AACnC,kBAAY,QAAQ,QAAQ;AAAA,IAC7B;AAGA,mBAAe,YAAY,QAAQ,UAAS;AAC3C,UAAI,QAAQ,SAAS,KAAG;AACxB,UAAI,EAAC,QAAO,EAAC,MAAK,QAAO,EAAC,IAAI,MAAM,GAAG,WAAW,cAAc,EAC/D,MAAM,aAAaC,wBAAW,MAAM,QAAQ,EAAE,KAAK,uBAAuB,EAC1E,MAAM,+FAA+F,EACrG,QAAQ,oBAAmB,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,QAAQ,EAAE;AAC/D,UAAG,WAAS;AAAG;AACf,aAAO,MAAM,SAAS,IAAI;AAC1B,kBAAY,QAAQ;AACpBC,oBAAAA,+DAAY,IAAI;AAAA,IACjB;AAGA,aAAS,WAAU;AAClB,aAAO,MAAM;IACd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/EA,GAAG,gBAAgB,SAAS;"}