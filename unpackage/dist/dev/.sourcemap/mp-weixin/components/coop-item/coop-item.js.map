{"version":3,"file":"coop-item.js","sources":["components/coop-item/coop-item.vue","../前端资料/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvREVMTC9EZXNrdG9wL2NoaWNrZW5zb3VwL2NvbXBvbmVudHMvY29vcC1pdGVtL2Nvb3AtaXRlbS52dWU"],"sourcesContent":["<template>\n\t<view class=\"qzItem\">\n\t\t<view class=\"userinfo\">\n\t\t\t<view class=\"avatar\"><image class=\"pic\" :src=\"item.userInfo.avatar || '../../static/images/defAvatar.png'\" mode=\"aspectFill\"></image></view>\n\t\t\t<view class=\"username\">{{item.userInfo.username}}</view>\n\t\t</view>\n\t\t<view class=\"body\">\t\t\t\n\t\t\t<view class=\"text\" v-if=\"item.content\">\n\t\t\t\t<view class=\"font\">{{item.content}}</view>\n\t\t\t</view>\n\t\t\t<view class=\"piclist\" v-if=\"item.picurls&&item.picurls.length\">\n\t\t\t\t<view class=\"pic\" v-for=\"(pic,index) in item.picurls\" \n\t\t\t\t:key=\"pic\">\n\t\t\t\t\t<image @click=\"clickPic(index)\" :src=\"pic\" mode=\"aspectFill\"></image>\n\t\t\t\t</view>\t\t\t\t\t\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t\n\t\t<view class=\"info\">\n\t\t\t<view class=\"left\">\t\t\t\t\n\t\t\t\t<uni-dateformat :date=\"item.publish_date\" format=\"MM月dd hh:mm\" :threshold=\"[60000,3600000*24*30]\"></uni-dateformat>\n\t\t\t\t<text style=\"padding-left: 20rpx;\">{{item.publish_address || item.publish_ip}}</text>\t\t\t\t\n\t\t\t</view>\n\t\t\t<view class=\"right\">\t\t\t\t\n\t\t\t\t<view class=\"remove\" @click=\"handleRemove\" v-if=\"isAdminRole() || item.userInfo._id == current_id\">\n\t\t\t\t\t<uni-icons type=\"trash-filled\" size=\"16\" color=\"#999\"></uni-icons>删除\t\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport {ref,nextTick, onMounted,defineExpose,computed, defineEmits} from \"vue\";\nimport { isAdminRole } from \"../../utils/common\";\n\n\nconst current_id = ref(uniCloud.getCurrentUserInfo().uid);\nconst emit = defineEmits([\"delRowEnv\"])\nconst props = defineProps({item:Object});\nconst db = uniCloud.database();\n\n\n\n//点击放大图片\nfunction clickPic(index){\t\n\tlet picurls = props.item.picurls.map(item=>item.replace('?imageMogr2/thumbnail/200x',''));\n\tuni.previewImage({\n\t\turls:picurls,\n\t\tcurrent:index\n\t})\n}\n\n\n//删除圈子记录\nasync function handleRemove(){\n\tlet result = await uni.showModal({\n\t\ttitle:\"是否删除\"\n\t})\n\tif(!result.confirm) return;\t\n\tlet {result:{errCode}} = await db.collection(\"chicken-coop\").doc(props.item._id).update({\n\t\tis_delete:true\n\t})\n\temit(\"delRowEnv\",{msg:\"删除成功\"})\n}\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n.qzItem{\n\tpadding:40rpx 30rpx;\t\n\t.userinfo{\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tborder-bottom:1px solid #f4f4f4;\n\t\tpadding-bottom:30rpx;\n\t\t.avatar{\n\t\t\twidth: 50rpx;\n\t\t\theight: 50rpx;\n\t\t\tborder-radius: 50%;\n\t\t\toverflow: hidden;\n\t\t\tmargin-right: 10rpx;\n\t\t\t.pic{\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t}\n\t\t}\n\t\t.username{\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor:#333;\n\t\t}\n\t}\n\t.body{\n\t\tpadding:15rpx 0 30rpx;\t\t\n\t\t.text{\t\t\t\n\t\t\tpadding-bottom:10rpx;\n\t\t\tfont-size: 40rpx;\n\t\t\ttext-align: justify;\n\t\t\tcolor:#111;\n\t\t\tline-height: 1.7em;\n\t\t\t.font{\n\t\t\t\ttext-overflow: -o-ellipsis-lastline;\n\t\t\t\toverflow: hidden;\t\t\t\t\n\t\t\t\ttext-overflow: ellipsis;\t\t\n\t\t\t\tdisplay: -webkit-box;\t\t\t\n\t\t\t\t-webkit-line-clamp: 2;\t\t\t\n\t\t\t\tline-clamp: 2;\t\t\t\t\t\n\t\t\t\t-webkit-box-orient: vertical;\n\t\t\t\twidth: 100%;\t\t\t\t\n\t\t\t\tword-break:break-all; \n\t\t\t}\n\t\t}\n\t\t.piclist{\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: repeat(3,1fr);\n\t\t\tgap: 15rpx;\n\t\t\tpadding-top:20rpx;\n\t\t\t.pic{\t\t\t\t\n\t\t\t\toverflow: hidden;\n\t\t\t\tborder-radius: 10rpx;\n\t\t\t\taspect-ratio: 1 / 1;\n\t\t\t\timage{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\t\n\t.info{\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content:space-between;\n\t\tfont-size: 28rpx;\t\n\t\tcolor:#999;\t\t\n\t\t.right{\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\t.ipname{\n\t\t\t\tmargin-right: 20rpx;\n\t\t\t}\n\t\t}\n\t}\t\n\t\n}\n\n</style>","import Component from 'C:/Users/DELL/Desktop/chickensoup/components/coop-item/coop-item.vue'\nwx.createComponent(Component)"],"names":["ref","uniCloud","uni"],"mappings":";;;;;;;;;;;;;;;;;;AAsCA,UAAM,aAAaA,cAAAA,IAAIC,cAAAA,GAAS,mBAAoB,EAAC,GAAG;AACxD,UAAM,OAAO;AACb,UAAM,QAAQ;AACd,UAAM,KAAKA,cAAAA,GAAS;AAKpB,aAAS,SAAS,OAAM;AACvB,UAAI,UAAU,MAAM,KAAK,QAAQ,IAAI,UAAM,KAAK,QAAQ,8BAA6B,EAAE,CAAC;AACxFC,oBAAAA,MAAI,aAAa;AAAA,QAChB,MAAK;AAAA,QACL,SAAQ;AAAA,MACV,CAAE;AAAA,IACF;AAIA,mBAAe,eAAc;AAC5B,UAAI,SAAS,MAAMA,cAAG,MAAC,UAAU;AAAA,QAChC,OAAM;AAAA,MACR,CAAE;AACD,UAAG,CAAC,OAAO;AAAS;AACK,YAAM,GAAG,WAAW,cAAc,EAAE,IAAI,MAAM,KAAK,GAAG,EAAE,OAAO;AAAA,QACvF,WAAU;AAAA,MACZ,CAAE;AACD,WAAK,aAAY,EAAC,KAAI,OAAM,CAAC;AAAA,IAC9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChEA,GAAG,gBAAgB,SAAS;"}