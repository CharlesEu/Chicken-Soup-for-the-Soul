{"version":3,"file":"soup-item.js","sources":["components/soup-item/soup-item.vue","../前端资料/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvREVMTC9EZXNrdG9wL2NoaWNrZW5zb3VwL2NvbXBvbmVudHMvc291cC1pdGVtL3NvdXAtaXRlbS52dWU"],"sourcesContent":["<!-- 审核鸡汤页面 子组件 -->\r\n<template>\n\t<view class=\"soupItem\" @click=\"goEdit\">\n\t\t<view class=\"head\">\n\t\t\t<view class=\"left\">\r\n\t\t\t\t<!-- 子组件 -->\n\t\t\t\t<soup-tab-group :type=\"item.soup_type\"></soup-tab-group>\n\t\t\t</view>\n\t\t\t<view class=\"right\" @click.stop=\"goDetail\">\n\t\t\t\t<uni-icons type=\"eye\" size=\"18\" color=\"#999\"></uni-icons>\n\t\t\t\t<text>详情</text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"content\">\n\t\t\t{{item.content}}\n\t\t</view>\n\t\t\n\t\t<view class=\"info\">\n\t\t\t<view class=\"left\">\n\t\t\t\t<view class=\"time\">\n\t\t\t\t\t<uni-dateformat :date=\"item.publish_date\" format='yyyy-MM-dd hh:mm'>\n\t\t\t\t\t</uni-dateformat>\t\t\t\t\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"right\">\n\t\t\t\t<view class=\"group\" v-if=\"stateFormat(item.status).value==1\">\n\t\t\t\t\t<view class=\"every\">\n\t\t\t\t\t\t<uni-icons type=\"heart\" color=\"#a7a7a7\" size=\"16\"></uni-icons>\n\t\t\t\t\t\t<text class=\"font\" v-if=\"item.like_count\">{{item.like_count}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"every\">\n\t\t\t\t\t\t<uni-icons type=\"star\" color=\"#a7a7a7\" size=\"16\"></uni-icons>\n\t\t\t\t\t\t<text class=\"font\" v-if=\"item.collect_count\">{{item.collect_count}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"every\">\n\t\t\t\t\t\t<uni-icons type=\"chatbubble\" color=\"#a7a7a7\" size=\"16\"></uni-icons>\n\t\t\t\t\t\t<text class=\"font\" v-if=\"item.comment_count\">{{item.comment_count}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view v-else :style=\"{color:useStateFormat.color}\" class=\"feedback\">\n\t\t\t\t\t{{useStateFormat.text}}\n\t\t\t\t\t<view class=\"icon\" v-if=\"item.status === 2\" \n\t\t\t\t\t@click.stop=\"clickRemove(item._id)\">\n\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport {stateFormat} from \"@/utils/common.js\"\nimport { computed ,getCurrentInstance} from \"vue\";\n\nconst {proxy} = getCurrentInstance()\n\n\nconst props = defineProps({\n\titem:{\n\t\ttype:Object,\n\t\tdefault(){\n\t\t\treturn {}\n\t\t}\n\t},\n\tisEdit:{\n\t\ttype:Boolean,\n\t\tdefault:true\n\t}\n})\nconst emits = defineEmits([\"remove\"])\n\nconst useStateFormat =  computed(()=>stateFormat(props.item.status))\nconst db = uniCloud.database();\n\nconst goEdit = ()=>{\t\n\tif(!props.isEdit) return;\n\tuni.navigateTo({\n\t\turl:\"/pages_self/soup/edit?id=\"+props.item._id\n\t})\n}\nconst goDetail = ()=>{\n\tconsole.log(\"跳转详情\");\n\tuni.navigateTo({\n\t\turl:\"/pages/detail/detail?id=\"+props.item._id\n\t})\n}\n\n//删除一条记录\nconst clickRemove = async (id)=>{\n\t\n\tlet res = await uni.showModal({\n\t\ttitle:\"是否删除此条鸡汤\",\n\t\tcontent:\"删除之后无法恢复，请谨慎操作\"\n\t})\n\tif(res.confirm){\n\t\tlet {result:{errCode}} = await db.collection(\"soup-chicken\").where(`_id == \"${id}\"`).update({\n\t\t\tis_delete:true\n\t\t});\n\t\tif(errCode!=0) return proxy.showToast(\"删除失败，请重新操作\")\n\t    proxy.showToast(\"删除成功\")\n\t\temits(\"remove\")\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.soupItem{\n\tborder:1px solid #e4e4e4;\n\tborder-bottom-width: 3px;\n\tmargin-bottom: 40rpx;\n\tborder-radius: 10rpx;\n\t\n\t.head{\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding:20rpx;\n\t\t.right{\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor:$text-font-color-3;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\t\t\t\n\t\t\tpadding:5rpx 10rpx;\n\t\t\ttext{\n\t\t\t\tmargin-left:10rpx;\n\t\t\t\tline-height: 1em;\n\t\t\t}\n\t\t}\n\t}\n\t.content{\n\t\tpadding:30rpx 20rpx;\n\t\tfont-size: 40rpx;\n\t\tfont-weight: bold;\n\t\tline-height: 1.7em;\n\t\ttext-align: justify;\t\t\n\t}\n\t.info{\n\t\tbackground: #f9f9f9;\n\t\tpadding:20rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tcolor:$text-font-color-3;\n\t\t.group{\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\t.every{\n\t\t\t\tmargin-left:20rpx;\n\t\t\t\t.font{\t\t\t\t\t\n\t\t\t\t\tfont-size: 26rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.feedback{\t\t\t\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\t.icon{\t\t\t\t\n\t\t\t\tpadding:5rpx 10rpx;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>","import Component from 'C:/Users/DELL/Desktop/chickensoup/components/soup-item/soup-item.vue'\nwx.createComponent(Component)"],"names":["getCurrentInstance","computed","stateFormat","uniCloud","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA,UAAM,EAAC,MAAK,IAAIA,iCAAoB;AAGpC,UAAM,QAAQ;AAYd,UAAM,QAAQ;AAEd,UAAM,iBAAkBC,cAAQ,SAAC,MAAIC,aAAAA,YAAY,MAAM,KAAK,MAAM,CAAC;AACnE,UAAM,KAAKC,cAAAA,GAAS;AAEpB,UAAM,SAAS,MAAI;AAClB,UAAG,CAAC,MAAM;AAAQ;AAClBC,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAI,8BAA4B,MAAM,KAAK;AAAA,MAC7C,CAAE;AAAA,IACF;AACA,UAAM,WAAW,MAAI;AACpBA,oBAAAA,MAAA,MAAA,OAAA,4CAAY,MAAM;AAClBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAI,6BAA2B,MAAM,KAAK;AAAA,MAC5C,CAAE;AAAA,IACF;AAGA,UAAM,cAAc,OAAO,OAAK;AAE/B,UAAI,MAAM,MAAMA,cAAG,MAAC,UAAU;AAAA,QAC7B,OAAM;AAAA,QACN,SAAQ;AAAA,MACV,CAAE;AACD,UAAG,IAAI,SAAQ;AACd,YAAI,EAAC,QAAO,EAAC,QAAO,EAAC,IAAI,MAAM,GAAG,WAAW,cAAc,EAAE,MAAM,WAAW,EAAE,GAAG,EAAE,OAAO;AAAA,UAC3F,WAAU;AAAA,QACb,CAAG;AACD,YAAG,WAAS;AAAG,iBAAO,MAAM,UAAU,YAAY;AAC/C,cAAM,UAAU,MAAM;AACzB,cAAM,QAAQ;AAAA,MACd;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzGA,GAAG,gBAAgB,SAAS;"}