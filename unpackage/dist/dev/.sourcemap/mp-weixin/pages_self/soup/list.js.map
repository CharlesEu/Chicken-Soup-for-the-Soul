{"version":3,"file":"list.js","sources":["pages_self/soup/list.vue","../前端资料/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNfc2VsZlxzb3VwXGxpc3QudnVl"],"sourcesContent":["<template>\n\t<view class=\"soupLayout\">\n\t\t<z-paging ref=\"paging\" safe-area-inset-bottom v-model=\"soupData\" @query=\"queryList\">\n\t\t\t<template #loading>\n\t\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\n\t\t\t</template>\n\t\t\t\n\t\t\t<template #top>\n\t\t\t\t<view class=\"headTop\">\n\t\t\t\t\t<view class=\"title\">我的鸡汤</view>\n\t\t\t\t\t<navigator  url=\"/pages_self/soup/edit\" class=\"btn\">+ 熬制鸡汤</navigator>\n\t\t\t\t</view>\n\t\t\t</template>\n\t\t\t\n\t\t\t<view class=\"list\">\n\t\t\t\t<view class=\"item\" v-for=\"item in soupData\" :key=\"item._id\">\n\t\t\t\t\t<soup-item :item=\"item\"></soup-item>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</z-paging>\n\t</view>\n</template>\n\n<script setup>\nimport { nextTick, ref } from 'vue';\nimport {useUserStore} from \"@/stores/user.js\"\nconst userStore = useUserStore();\nconst soupData = ref([]);\nconst paging = ref(null);\nconst db = uniCloud.database();\n\nconst queryList = (pageNo, pageSize)=>{\t\n\tgetSoupList(pageNo, pageSize);\n}\n\n\nconst getSoupList = async (pageNo, pageSize)=>{\n\tlet skip = (pageNo - 1) * pageSize;\n\ttry{\n\t\tlet {result:{errCode,data}} = await db.collection(\"soup-chicken\")\t\t\t\t\n\t\t.where(`user_id == $cloudEnv_uid`)\n\t\t.field(\"publish_date,last_modify_date,content,soup_type,like_count,collect_count,comment_count,status\")\n\t\t.orderBy(\"last_modify_date\",\"desc\")\n\t\t.skip(skip)\n\t\t.limit(pageSize)\n\t\t.get();\n\t\tif(errCode != 0) return;\t\n\t\tpaging.value.complete(data);\n\t}catch(e){\n\t\tpaging.value.complete(false);\n\t}\n}\n\n\nuni.$on(\"soupUpdate\",(e)=>{\n\tnextTick(()=>{\n\t\tpaging.value.reload();\n\t})\t\n});\n\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n.soupLayout{\t\n\t.headTop{\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tfont-weight: 600;\n\t\tpadding:30rpx 30rpx 10rpx;\n\t\tcolor:#000;\n\t\t.title{\n\t\t\tfont-size: 40rpx\n\t\t}\n\t\t.btn{\n\t\t\tborder:1px solid #000;\n\t\t\tpadding:8rpx 15rpx;\n\t\t\tborder-radius: 100rpx;\n\t\t}\n\t}\n\t.list{\n\t\tpadding:30rpx 30rpx 0;\n\t}\n}\n</style>\n","import MiniProgramPage from 'C:/Users/DELL/Desktop/chickensoup/pages_self/soup/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","ref","uniCloud","uni","nextTick"],"mappings":";;;;;;;;;;;;;;;;;;AA0BkBA,gBAAAA,aAAe;AACjC,UAAM,WAAWC,cAAAA,IAAI,CAAA,CAAE;AACvB,UAAM,SAASA,cAAAA,IAAI,IAAI;AACvB,UAAM,KAAKC,cAAAA,GAAS;AAEpB,UAAM,YAAY,CAAC,QAAQ,aAAW;AACrC,kBAAY,QAAQ,QAAQ;AAAA,IAC7B;AAGA,UAAM,cAAc,OAAO,QAAQ,aAAW;AAC7C,UAAI,QAAQ,SAAS,KAAK;AAC1B,UAAG;AACF,YAAI,EAAC,QAAO,EAAC,SAAQ,KAAI,EAAC,IAAI,MAAM,GAAG,WAAW,cAAc,EAC/D,MAAM,0BAA0B,EAChC,MAAM,+FAA+F,EACrG,QAAQ,oBAAmB,MAAM,EACjC,KAAK,IAAI,EACT,MAAM,QAAQ,EACd;AACD,YAAG,WAAW;AAAG;AACjB,eAAO,MAAM,SAAS,IAAI;AAAA,MAC1B,SAAM,GAAE;AACR,eAAO,MAAM,SAAS,KAAK;AAAA,MAC3B;AAAA,IACF;AAGAC,kBAAAA,MAAI,IAAI,cAAa,CAAC,MAAI;AACzBC,oBAAAA,WAAS,MAAI;AACZ,eAAO,MAAM;MACf,CAAE;AAAA,IACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzDD,GAAG,WAAW,eAAe;"}