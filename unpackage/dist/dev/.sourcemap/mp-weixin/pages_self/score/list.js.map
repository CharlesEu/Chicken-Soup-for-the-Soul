{"version":3,"file":"list.js","sources":["pages_self/score/list.vue","../前端资料/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNfc2VsZlxzY29yZVxsaXN0LnZ1ZQ"],"sourcesContent":["<!-- 我的积分页面 -->\r\n<template>\n\t<view class=\"scorePage\">\n\t\t<z-paging ref=\"paging\" v-model=\"scoreData\" @query=\"queryList\" :default-page-size=\"10\" empty-view-text=\"还没有积分\">\n\t\t\t\n\t\t\t<template #loading>\n\t\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\n\t\t\t</template>\n\t\t\t\n\t\t\t<template>\n\t\t\t\t<view class=\"head\">\n\t\t\t\t\t<view class=\"number\">{{balance}}</view>\n\t\t\t\t\t<view class=\"text\">当前积分</view>\n\t\t\t\t</view>\n\t\t\t</template>\n\t\t\t\n\t\t\t <view class=\"list\">\n\t\t\t\t<view class=\"item\" v-for=\"item in scoreData\" :key=\"item._id\">\t\t\t\t\n\t\t\t\t\t<view class=\"left\">\n\t\t\t\t\t\t<view class=\"title\">\n\t\t\t\t\t\t\t<template v-if=\"item.type==1\">\n\t\t\t\t\t\t\t\t获得\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-if=\"item.type==2\">\n\t\t\t\t\t\t\t\t支出\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t({{item.comment}})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"order\">编号：{{item._id}}</view>\n\t\t\t\t\t\t<view class=\"time\">{{formatDate(item.create_date)}}</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"right\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<template v-if=\"item.type==1\">\n\t\t\t\t\t\t\t\t+\n\t\t\t\t\t\t\t</template> \n\t\t\t\t\t\t\t{{item.score}}\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t </view>\t\t\t \n\t\t</z-paging>\t\t\n\t</view>\n</template>\n\n<script setup>\nimport {ref,computed} from \"vue\";\nimport {formatDate} from \"@/utils/tools.js\" //公共库utils\nconst paging = ref(null);\nconst scoreData = ref([]);\nconst db = uniCloud.database();\n\nconst balance = computed(()=>scoreData.value.length?scoreData.value[0].balance :0);\n\n\n//滚动数据处理\nconst queryList = (pageNo, pageSize) => {\t\n\tgetScoreList(pageNo, pageSize);\n}\n\n//获取积分列表\nasync function getScoreList(pageNo, pageSize){\n\tlet skip = (pageNo-1)*pageSize;\n\ttry{\n\t\tlet {result:{data,errCode}} = await db.collection(\"soup-scores\").where(`user_id == $cloudEnv_uid`).orderBy('create_date',\"desc\").skip(skip).limit(pageSize).get();\n\t\tif(errCode!=0) return;\n\t\tconsole.log(data);\n\t\tpaging.value.complete(data);\n\t}catch(e){\n\t\tpaging.value.complete(false);\n\t}\n\t\n\t\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.scorePage{\n\t.head{\n\t\tbackground-image: linear-gradient(to right,rgba(75,228,197,1),rgba(75,228,197,0.5));\n\t\twidth: 690rpx;\n\t\tmargin:50rpx auto;\n\t\tborder-radius: 10rpx;\n\t\tpadding:30rpx;\n\t\tcolor:#fff;\n\t\ttext-align: center;\n\t\t.number{\n\t\t\tfont-size: 52rpx;\n\t\t\tfont-weight: 600;\n\t\t}\n\t\t.text{\n\t\t\tfont-size: 28rpx;\n\t\t\topacity: 0.8;\n\t\t}\n\t}\n\t.list{\n\t\tpadding:0rpx 30rpx 0;\n\t\t.item{\n\t\t\tpadding: 40rpx 0;\n\t\t\tborder-bottom:1px solid $border-color-light;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\t.left{\n\t\t\t\tcolor:$text-font-color-3;\n\t\t\t\tfont-size: 28rpx;\t\t\n\t\t\t\t.title{\n\t\t\t\t\tfont-size: 38rpx;\n\t\t\t\t\tcolor:$text-font-color-1;\n\t\t\t\t\tpadding-bottom:10rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.right{\n\t\t\t\tcolor:$text-font-color-3;\n\t\t\t\tfont-size: 34rpx;\n\t\t\t}\n\t\t}\n\t}\t\n}\n</style>\n","import MiniProgramPage from 'C:/Users/DELL/Desktop/chickensoup/pages_self/score/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uniCloud","computed","uni"],"mappings":";;;;;;;;;;;;;;;;;AAiDA,UAAM,SAASA,cAAAA,IAAI,IAAI;AACvB,UAAM,YAAYA,cAAAA,IAAI,CAAA,CAAE;AACxB,UAAM,KAAKC,cAAAA,GAAS;AAEpB,UAAM,UAAUC,cAAQ,SAAC,MAAI,UAAU,MAAM,SAAO,UAAU,MAAM,CAAC,EAAE,UAAS,CAAC;AAIjF,UAAM,YAAY,CAAC,QAAQ,aAAa;AACvC,mBAAa,QAAQ,QAAQ;AAAA,IAC9B;AAGA,mBAAe,aAAa,QAAQ,UAAS;AAC5C,UAAI,QAAQ,SAAO,KAAG;AACtB,UAAG;AACF,YAAI,EAAC,QAAO,EAAC,MAAK,QAAO,EAAC,IAAI,MAAM,GAAG,WAAW,aAAa,EAAE,MAAM,0BAA0B,EAAE,QAAQ,eAAc,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,QAAQ,EAAE,IAAG;AAC/J,YAAG,WAAS;AAAG;AACfC,sBAAAA,MAAY,MAAA,OAAA,mCAAA,IAAI;AAChB,eAAO,MAAM,SAAS,IAAI;AAAA,MAC1B,SAAM,GAAE;AACR,eAAO,MAAM,SAAS,KAAK;AAAA,MAC3B;AAAA,IAGF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzEA,GAAG,WAAW,eAAe;"}