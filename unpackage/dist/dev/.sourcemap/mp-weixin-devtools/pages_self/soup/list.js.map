{"version":3,"names":["stores_user","useUserStore","soupData","common_vendor","ref","paging","db","nr","database","queryList","pageNo","pageSize","getSoupList","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","skip","_yield$db$collection$","_yield$db$collection$2","errCode","data","wrap","_callee$","_context","prev","next","collection","where","field","orderBy","limit","get","sent","result","abrupt","value","complete","t0","stop","_x","_x2","apply","arguments","index","$on","e","nextTick$1","reload","wx","createPage","MiniProgramPage"],"sources":["list.vue","cGFnZXNfc2VsZlxzb3VwXGxpc3QudnVl"],"sourcesContent":["<template>\n\t<view class=\"soupLayout\">\n\t\t<z-paging ref=\"paging\" safe-area-inset-bottom v-model=\"soupData\" @query=\"queryList\">\n\t\t\t<template #loading>\n\t\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\n\t\t\t</template>\n\t\t\t\n\t\t\t<template #top>\n\t\t\t\t<view class=\"headTop\">\n\t\t\t\t\t<view class=\"title\">我的鸡汤</view>\n\t\t\t\t\t<navigator  url=\"/pages_self/soup/edit\" class=\"btn\">+ 熬制鸡汤</navigator>\n\t\t\t\t</view>\n\t\t\t</template>\n\t\t\t\n\t\t\t<view class=\"list\">\n\t\t\t\t<view class=\"item\" v-for=\"item in soupData\" :key=\"item._id\">\n\t\t\t\t\t<soup-item :item=\"item\"></soup-item>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</z-paging>\n\t</view>\n</template>\n\n<script setup>\nimport { nextTick, ref } from 'vue';\nimport {useUserStore} from \"@/stores/user.js\"\nconst userStore = useUserStore();\nconst soupData = ref([]);\nconst paging = ref(null);\nconst db = uniCloud.database();\n\nconst queryList = (pageNo, pageSize)=>{\t\n\tgetSoupList(pageNo, pageSize);\n}\n\n\nconst getSoupList = async (pageNo, pageSize)=>{\n\tlet skip = (pageNo - 1) * pageSize;\n\ttry{\n\t\tlet {result:{errCode,data}} = await db.collection(\"soup-chicken\")\t\t\t\t\n\t\t.where(`user_id == $cloudEnv_uid`)\n\t\t.field(\"publish_date,last_modify_date,content,soup_type,like_count,collect_count,comment_count,status\")\n\t\t.orderBy(\"last_modify_date\",\"desc\")\n\t\t.skip(skip)\n\t\t.limit(pageSize)\n\t\t.get();\n\t\tif(errCode != 0) return;\t\n\t\tpaging.value.complete(data);\n\t}catch(e){\n\t\tpaging.value.complete(false);\n\t}\n}\n\n\nuni.$on(\"soupUpdate\",(e)=>{\n\tnextTick(()=>{\n\t\tpaging.value.reload();\n\t})\t\n});\n\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n.soupLayout{\t\n\t.headTop{\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tfont-weight: 600;\n\t\tpadding:30rpx 30rpx 10rpx;\n\t\tcolor:#000;\n\t\t.title{\n\t\t\tfont-size: 40rpx\n\t\t}\n\t\t.btn{\n\t\t\tborder:1px solid #000;\n\t\t\tpadding:8rpx 15rpx;\n\t\t\tborder-radius: 100rpx;\n\t\t}\n\t}\n\t.list{\n\t\tpadding:30rpx 30rpx 0;\n\t}\n}\n</style>\n","import MiniProgramPage from 'C:/Users/DELL/Desktop/chickensoup/pages_self/soup/list.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA0BkBA,WAAA,CAAAC,YAAA,EAAe;IACjC,IAAMC,QAAA,GAAWC,aAAA,CAAAC,GAAA,CAAI,EAAE;IACvB,IAAMC,MAAA,GAASF,aAAA,CAAAC,GAAA,CAAI,IAAI;IACvB,IAAME,EAAA,GAAKH,aAAA,CAAAI,EAAA,CAASC,QAAA;IAEpB,IAAMC,SAAA,GAAY,SAAZA,UAAaC,MAAA,EAAQC,QAAA,EAAW;MACrCC,WAAA,CAAYF,MAAA,EAAQC,QAAQ;IAC7B;IAGA,IAAMC,WAAA;MAAA,IAAAC,IAAA,GAAAC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,CAAc,SAAAC,QAAOP,MAAA,EAAQC,QAAA;QAAA,IAAAO,IAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,OAAA,EAAAC,IAAA;QAAA,OAAAP,oBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAC9BT,IAAA,IAAQR,MAAA,GAAS,KAAKC,QAAA;cAAAc,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEWrB,EAAA,CAAGsB,UAAA,CAAW,cAAc,EAC/DC,KAAA,4BAAgC,CAChCC,KAAA,CAAM,+FAA+F,EACrGC,OAAA,CAAQ,oBAAmB,MAAM,EACjCb,IAAA,CAAKA,IAAI,EACTc,KAAA,CAAMrB,QAAQ,EACdsB,GAAA;YAAA;cAAAd,qBAAA,GAAAM,QAAA,CAAAS,IAAA;cAAAd,sBAAA,GAAAD,qBAAA,CANIgB,MAAA;cAAQd,OAAA,GAAAD,sBAAA,CAAAC,OAAA;cAAQC,IAAA,GAAAF,sBAAA,CAAAE,IAAA;cAAA,MAOlBD,OAAA,IAAW;gBAAAI,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,OAAAF,QAAA,CAAAW,MAAA;YAAA;cACd/B,MAAA,CAAOgC,KAAA,CAAMC,QAAA,CAAShB,IAAI;cAAAG,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAc,EAAA,GAAAd,QAAA;cAE1BpB,MAAA,CAAOgC,KAAA,CAAMC,QAAA,CAAS,KAAK;YAAA;YAAA;cAAA,OAAAb,QAAA,CAAAe,IAAA;UAAA;QAAA,GAAAvB,OAAA;MAAA,CAE7B;MAAA,gBAfML,YAAA6B,EAAA,EAAAC,GAAA;QAAA,OAAA7B,IAAA,CAAA8B,KAAA,OAAAC,SAAA;MAAA;IAAA,GAeN;IAGAzC,aAAA,CAAA0C,KAAA,CAAIC,GAAA,CAAI,cAAa,UAACC,CAAA,EAAI;MACzB5C,aAAA,CAAA6C,UAAA,CAAS,YAAI;QACZ3C,MAAA,CAAOgC,KAAA,CAAMY,MAAA;MACf,CAAE;IACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzDDC,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}